<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>LIDAR Scanner: GccApplication2/motor.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LIDAR Scanner
   &#160;<span id="projectnumber">v1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_859e15b25b15b2f7c97aba3ba1773a08.html">GccApplication2</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">motor.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Declares the motor class.  
<a href="#details">More...</a></p>

<p><a href="motor_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a43bafb28b29491ec7f871319b5a3b2f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a43bafb28b29491ec7f871319b5a3b2f8">F_CPU</a>&#160;&#160;&#160;16000000L     /* Cristal with 16 MHz */</td></tr>
<tr class="memdesc:a43bafb28b29491ec7f871319b5a3b2f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines CPU.  <a href="#a43bafb28b29491ec7f871319b5a3b2f8">More...</a><br /></td></tr>
<tr class="separator:a43bafb28b29491ec7f871319b5a3b2f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea32653b4399f65cd8a9fbd3856a15d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a3ea32653b4399f65cd8a9fbd3856a15d">PWMA</a>&#160;&#160;&#160;PIND5</td></tr>
<tr class="memdesc:a3ea32653b4399f65cd8a9fbd3856a15d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines the PWM-Pin A.  <a href="#a3ea32653b4399f65cd8a9fbd3856a15d">More...</a><br /></td></tr>
<tr class="separator:a3ea32653b4399f65cd8a9fbd3856a15d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1698a336f593db58ab114e61fa9c29"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a8a1698a336f593db58ab114e61fa9c29">PWMB</a>&#160;&#160;&#160;PIND6</td></tr>
<tr class="memdesc:a8a1698a336f593db58ab114e61fa9c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines the PWM-Pin B.  <a href="#a8a1698a336f593db58ab114e61fa9c29">More...</a><br /></td></tr>
<tr class="separator:a8a1698a336f593db58ab114e61fa9c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683b3c17fd73a02e14a04171f59c05b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>&#160;&#160;&#160;PIND3</td></tr>
<tr class="memdesc:a683b3c17fd73a02e14a04171f59c05b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines motor-pin A1.  <a href="#a683b3c17fd73a02e14a04171f59c05b4">More...</a><br /></td></tr>
<tr class="separator:a683b3c17fd73a02e14a04171f59c05b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c559cd9c5657f31feac95152bfb24f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>&#160;&#160;&#160;PIND2</td></tr>
<tr class="memdesc:a3c559cd9c5657f31feac95152bfb24f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines motor-pin A2.  <a href="#a3c559cd9c5657f31feac95152bfb24f9">More...</a><br /></td></tr>
<tr class="separator:a3c559cd9c5657f31feac95152bfb24f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a97b9410a899a92f489ff17c1d23e09"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>&#160;&#160;&#160;PINB0</td></tr>
<tr class="memdesc:a5a97b9410a899a92f489ff17c1d23e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines motor-pin B1.  <a href="#a5a97b9410a899a92f489ff17c1d23e09">More...</a><br /></td></tr>
<tr class="separator:a5a97b9410a899a92f489ff17c1d23e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90babf8b2cc9f24a09153374b925858"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>&#160;&#160;&#160;PIND7</td></tr>
<tr class="memdesc:aa90babf8b2cc9f24a09153374b925858"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines motor-pin B2.  <a href="#aa90babf8b2cc9f24a09153374b925858">More...</a><br /></td></tr>
<tr class="separator:aa90babf8b2cc9f24a09153374b925858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3603e97fc1a6348a090d0ce8aaef627d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a3603e97fc1a6348a090d0ce8aaef627d">STBY</a>&#160;&#160;&#160;PIND4</td></tr>
<tr class="memdesc:a3603e97fc1a6348a090d0ce8aaef627d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines standby-pin.  <a href="#a3603e97fc1a6348a090d0ce8aaef627d">More...</a><br /></td></tr>
<tr class="separator:a3603e97fc1a6348a090d0ce8aaef627d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9079c17aeed3c5b970dc31aa27662d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a6a9079c17aeed3c5b970dc31aa27662d">T_STEP</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a6a9079c17aeed3c5b970dc31aa27662d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines the minimum time between steps in ms.  <a href="#a6a9079c17aeed3c5b970dc31aa27662d">More...</a><br /></td></tr>
<tr class="separator:a6a9079c17aeed3c5b970dc31aa27662d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe61b07c31c2a3e90576eb4c5d95b024"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:abe61b07c31c2a3e90576eb4c5d95b024"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines clockwise rotation.  <a href="#abe61b07c31c2a3e90576eb4c5d95b024">More...</a><br /></td></tr>
<tr class="separator:abe61b07c31c2a3e90576eb4c5d95b024"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a460b6555077a64fc97f2e7ef47b843"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a8a460b6555077a64fc97f2e7ef47b843">CCW</a>&#160;&#160;&#160;-1</td></tr>
<tr class="memdesc:a8a460b6555077a64fc97f2e7ef47b843"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines counter clockwise rotation.  <a href="#a8a460b6555077a64fc97f2e7ef47b843">More...</a><br /></td></tr>
<tr class="separator:a8a460b6555077a64fc97f2e7ef47b843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f9730045a115a7a7583202ee12c1429"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a>&#160;&#160;&#160;200</td></tr>
<tr class="memdesc:a9f9730045a115a7a7583202ee12c1429"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines motor maximum steps per rotation.  <a href="#a9f9730045a115a7a7583202ee12c1429">More...</a><br /></td></tr>
<tr class="separator:a9f9730045a115a7a7583202ee12c1429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d5e23bac60070676b465522a140f5c7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a0d5e23bac60070676b465522a140f5c7">POWER</a>&#160;&#160;&#160;60</td></tr>
<tr class="memdesc:a0d5e23bac60070676b465522a140f5c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A macro that defines the maximum power output in %.  <a href="#a0d5e23bac60070676b465522a140f5c7">More...</a><br /></td></tr>
<tr class="separator:a0d5e23bac60070676b465522a140f5c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abb648242b26e3a1d611265e134b81198"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#abb648242b26e3a1d611265e134b81198">_sleep_ms</a> (int ms)</td></tr>
<tr class="memdesc:abb648242b26e3a1d611265e134b81198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay for ms milliseconds. The _delay_ms() function does not allow the use of variables. Thats what this function is used for.  <a href="#abb648242b26e3a1d611265e134b81198">More...</a><br /></td></tr>
<tr class="separator:abb648242b26e3a1d611265e134b81198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28f5a8184eacfc5cad87d8beecc898b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#ae28f5a8184eacfc5cad87d8beecc898b">motor_timer_init</a> (void)</td></tr>
<tr class="memdesc:ae28f5a8184eacfc5cad87d8beecc898b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the timer0 for the power control.  <a href="#ae28f5a8184eacfc5cad87d8beecc898b">More...</a><br /></td></tr>
<tr class="separator:ae28f5a8184eacfc5cad87d8beecc898b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2a5af0fb9c1fa2047a5ca0af110f806"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#aa2a5af0fb9c1fa2047a5ca0af110f806">motor_init</a> (void)</td></tr>
<tr class="memdesc:aa2a5af0fb9c1fa2047a5ca0af110f806"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises all used pins as output and calls <a class="el" href="motor_8c.html#ae28f5a8184eacfc5cad87d8beecc898b" title="Initialises the timer0 for the power control. ">motor_timer_init()</a>  <a href="#aa2a5af0fb9c1fa2047a5ca0af110f806">More...</a><br /></td></tr>
<tr class="separator:aa2a5af0fb9c1fa2047a5ca0af110f806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e4f36d6a7004d355f88c4fedca4eba0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a> (char steps, char dir)</td></tr>
<tr class="memdesc:a4e4f36d6a7004d355f88c4fedca4eba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn Stepper for some steps in the desired direction. Based on the last step, this function sets the pins to rotate the stepper by one step.  <a href="#a4e4f36d6a7004d355f88c4fedca4eba0">More...</a><br /></td></tr>
<tr class="separator:a4e4f36d6a7004d355f88c4fedca4eba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0425aa4058c28641dbbf70efcd15a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a3f0425aa4058c28641dbbf70efcd15a1">motor_toPosition</a> (char p)</td></tr>
<tr class="memdesc:a3f0425aa4058c28641dbbf70efcd15a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turns motor to the defined position.  <a href="#a3f0425aa4058c28641dbbf70efcd15a1">More...</a><br /></td></tr>
<tr class="separator:a3f0425aa4058c28641dbbf70efcd15a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82a3750545788111dcc7e2ec0209ca0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a82a3750545788111dcc7e2ec0209ca0b">motor_set_speed</a> (char t)</td></tr>
<tr class="memdesc:a82a3750545788111dcc7e2ec0209ca0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change time between steps.  <a href="#a82a3750545788111dcc7e2ec0209ca0b">More...</a><br /></td></tr>
<tr class="separator:a82a3750545788111dcc7e2ec0209ca0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4661f2fc8609e109c41713f5d2dbf71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#af4661f2fc8609e109c41713f5d2dbf71">motor_set_power</a> (char power)</td></tr>
<tr class="memdesc:af4661f2fc8609e109c41713f5d2dbf71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the maximum power output.  <a href="#af4661f2fc8609e109c41713f5d2dbf71">More...</a><br /></td></tr>
<tr class="separator:af4661f2fc8609e109c41713f5d2dbf71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f66a0a38666bbadc0d418080954d2b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a3f66a0a38666bbadc0d418080954d2b7">motor_set_position</a> (char pos)</td></tr>
<tr class="memdesc:a3f66a0a38666bbadc0d418080954d2b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the position of the stepper (only in software).  <a href="#a3f66a0a38666bbadc0d418080954d2b7">More...</a><br /></td></tr>
<tr class="separator:a3f66a0a38666bbadc0d418080954d2b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12cd145e41059b1512f72366385fe985"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a12cd145e41059b1512f72366385fe985">motor_get_position</a> (void)</td></tr>
<tr class="memdesc:a12cd145e41059b1512f72366385fe985"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the actual motor position.  <a href="#a12cd145e41059b1512f72366385fe985">More...</a><br /></td></tr>
<tr class="separator:a12cd145e41059b1512f72366385fe985"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a496e55be03461ae66c00869a3205f62c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="motor_8h.html#a496e55be03461ae66c00869a3205f62c">motor_calibrate</a> (void)</td></tr>
<tr class="memdesc:a496e55be03461ae66c00869a3205f62c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calibrates motor position. This function reads the value of the adc pin of the light barrier. The motor is in the right position if the value is lower than 40. If it is higher, it rotates the stepper in CW direction for 100 steps (180°). Then it returns to zero and rotates in CCW direction for 100 steps (180°) till the value is below 40.  <a href="#a496e55be03461ae66c00869a3205f62c">More...</a><br /></td></tr>
<tr class="separator:a496e55be03461ae66c00869a3205f62c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declares the motor class. </p>

<p>Definition in file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a8a460b6555077a64fc97f2e7ef47b843"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CCW&#160;&#160;&#160;-1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines counter clockwise rotation. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00132">132</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="abe61b07c31c2a3e90576eb4c5d95b024"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CW&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines clockwise rotation. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00121">121</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a43bafb28b29491ec7f871319b5a3b2f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define F_CPU&#160;&#160;&#160;16000000L     /* Cristal with 16 MHz */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines CPU. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00021">21</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a683b3c17fd73a02e14a04171f59c05b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTA1&#160;&#160;&#160;PIND3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines motor-pin A1. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00055">55</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3c559cd9c5657f31feac95152bfb24f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTA2&#160;&#160;&#160;PIND2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines motor-pin A2. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00066">66</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5a97b9410a899a92f489ff17c1d23e09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTB1&#160;&#160;&#160;PINB0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines motor-pin B1. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00077">77</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa90babf8b2cc9f24a09153374b925858"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTB2&#160;&#160;&#160;PIND7</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines motor-pin B2. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00088">88</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9f9730045a115a7a7583202ee12c1429"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOTOR_MAX_STEPS&#160;&#160;&#160;200</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines motor maximum steps per rotation. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00143">143</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0d5e23bac60070676b465522a140f5c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POWER&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines the maximum power output in %. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00154">154</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3ea32653b4399f65cd8a9fbd3856a15d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWMA&#160;&#160;&#160;PIND5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines the PWM-Pin A. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00033">33</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8a1698a336f593db58ab114e61fa9c29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PWMB&#160;&#160;&#160;PIND6</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines the PWM-Pin B. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00044">44</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3603e97fc1a6348a090d0ce8aaef627d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STBY&#160;&#160;&#160;PIND4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines standby-pin. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00099">99</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6a9079c17aeed3c5b970dc31aa27662d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define T_STEP&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A macro that defines the minimum time between steps in ms. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8h_source.html#l00110">110</a> of file <a class="el" href="motor_8h_source.html">motor.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="abb648242b26e3a1d611265e134b81198"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _sleep_ms </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delay for ms milliseconds. The _delay_ms() function does not allow the use of variables. Thats what this function is used for. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ms</td><td>The milliseconds. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00032">32</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                      {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0;i&lt;ms;i++)</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        _delay_ms(1);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    }</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a496e55be03461ae66c00869a3205f62c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_calibrate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calibrates motor position. This function reads the value of the adc pin of the light barrier. The motor is in the right position if the value is lower than 40. If it is higher, it rotates the stepper in CW direction for 100 steps (180°). Then it returns to zero and rotates in CCW direction for 100 steps (180°) till the value is below 40. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00262">262</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                      {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    uint16_t a;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">char</span> p = 0;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">char</span> top = 60;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    int8_t d = <a class="code" href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a>;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">while</span> (1)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        wdt_reset();</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        a = <a class="code" href="adc_8c.html#a35feb5e7313b735110c50209f8d280cd">adc_read_avg</a>(5);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">//a= adc_read_avg(3);</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="comment">//serial_write_int(a); //debug infos</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">//serial_write_string(&quot;\r\n&quot;);</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="keywordflow">if</span> (a&lt;=top)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="comment">//motor_turn(2,d);</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="motor_8c.html#a3f66a0a38666bbadc0d418080954d2b7">motor_set_position</a>(<a class="code" href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a>/4);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">if</span>(d==<a class="code" href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a>)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <a class="code" href="motor_8c.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a>(1,<a class="code" href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a>);</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            p++;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="motor_8c.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a>(1,<a class="code" href="motor_8h.html#a8a460b6555077a64fc97f2e7ef47b843">CCW</a>);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            p++;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (p == 100)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            d = d * (-1);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <a class="code" href="motor_8c.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a>(100,d);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            p = 0;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            top+=5;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        </div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;}<div class="ttc" id="motor_8h_html_a9f9730045a115a7a7583202ee12c1429"><div class="ttname"><a href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a></div><div class="ttdeci">#define MOTOR_MAX_STEPS</div><div class="ttdoc">A macro that defines motor maximum steps per rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00143">motor.h:143</a></div></div>
<div class="ttc" id="motor_8h_html_abe61b07c31c2a3e90576eb4c5d95b024"><div class="ttname"><a href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a></div><div class="ttdeci">#define CW</div><div class="ttdoc">A macro that defines clockwise rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00121">motor.h:121</a></div></div>
<div class="ttc" id="motor_8c_html_a3f66a0a38666bbadc0d418080954d2b7"><div class="ttname"><a href="motor_8c.html#a3f66a0a38666bbadc0d418080954d2b7">motor_set_position</a></div><div class="ttdeci">void motor_set_position(char pos)</div><div class="ttdoc">Set the position of the stepper (only in software). </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00229">motor.c:229</a></div></div>
<div class="ttc" id="motor_8c_html_a4e4f36d6a7004d355f88c4fedca4eba0"><div class="ttname"><a href="motor_8c.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a></div><div class="ttdeci">void motor_turn(char steps, char dir)</div><div class="ttdoc">Turn Stepper for some steps in the desired direction. Based on the last step, this function sets the ...</div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00091">motor.c:91</a></div></div>
<div class="ttc" id="motor_8h_html_a8a460b6555077a64fc97f2e7ef47b843"><div class="ttname"><a href="motor_8h.html#a8a460b6555077a64fc97f2e7ef47b843">CCW</a></div><div class="ttdeci">#define CCW</div><div class="ttdoc">A macro that defines counter clockwise rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00132">motor.h:132</a></div></div>
<div class="ttc" id="adc_8c_html_a35feb5e7313b735110c50209f8d280cd"><div class="ttname"><a href="adc_8c.html#a35feb5e7313b735110c50209f8d280cd">adc_read_avg</a></div><div class="ttdeci">uint16_t adc_read_avg(char x)</div><div class="ttdoc">Reads multiple values and calculates the average value. </div><div class="ttdef"><b>Definition:</b> <a href="adc_8c_source.html#l00065">adc.c:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a12cd145e41059b1512f72366385fe985"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char motor_get_position </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the actual motor position. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Motor position in steps. </dd></dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00244">244</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                             {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;}</div>
<div class="ttc" id="motor_8c_html_afd03d8ac50bc4803e0c5a5fea33772de"><div class="ttname"><a href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a></div><div class="ttdeci">char motor_position</div><div class="ttdoc">The motor position. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00017">motor.c:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa2a5af0fb9c1fa2047a5ca0af110f806"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises all used pins as output and calls <a class="el" href="motor_8c.html#ae28f5a8184eacfc5cad87d8beecc898b" title="Initialises the timer0 for the power control. ">motor_timer_init()</a> </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00067">67</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                     {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    DDRD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a3ea32653b4399f65cd8a9fbd3856a15d">PWMA</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#a8a1698a336f593db58ab114e61fa9c29">PWMB</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>)  | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#a3603e97fc1a6348a090d0ce8aaef627d">STBY</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    DDRB |= (1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    PORTD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a3ea32653b4399f65cd8a9fbd3856a15d">PWMA</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#a8a1698a336f593db58ab114e61fa9c29">PWMB</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#a3603e97fc1a6348a090d0ce8aaef627d">STBY</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="motor_8c.html#ae28f5a8184eacfc5cad87d8beecc898b">motor_timer_init</a>();</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="ttc" id="motor_8h_html_a5a97b9410a899a92f489ff17c1d23e09"><div class="ttname"><a href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a></div><div class="ttdeci">#define MOTB1</div><div class="ttdoc">A macro that defines motor-pin B1. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00077">motor.h:77</a></div></div>
<div class="ttc" id="motor_8h_html_aa90babf8b2cc9f24a09153374b925858"><div class="ttname"><a href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a></div><div class="ttdeci">#define MOTB2</div><div class="ttdoc">A macro that defines motor-pin B2. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00088">motor.h:88</a></div></div>
<div class="ttc" id="motor_8h_html_a3c559cd9c5657f31feac95152bfb24f9"><div class="ttname"><a href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a></div><div class="ttdeci">#define MOTA2</div><div class="ttdoc">A macro that defines motor-pin A2. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00066">motor.h:66</a></div></div>
<div class="ttc" id="motor_8c_html_ae28f5a8184eacfc5cad87d8beecc898b"><div class="ttname"><a href="motor_8c.html#ae28f5a8184eacfc5cad87d8beecc898b">motor_timer_init</a></div><div class="ttdeci">void motor_timer_init(void)</div><div class="ttdoc">Initialises the timer0 for the power control. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00050">motor.c:50</a></div></div>
<div class="ttc" id="motor_8h_html_a8a1698a336f593db58ab114e61fa9c29"><div class="ttname"><a href="motor_8h.html#a8a1698a336f593db58ab114e61fa9c29">PWMB</a></div><div class="ttdeci">#define PWMB</div><div class="ttdoc">A macro that defines the PWM-Pin B. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00044">motor.h:44</a></div></div>
<div class="ttc" id="motor_8h_html_a3603e97fc1a6348a090d0ce8aaef627d"><div class="ttname"><a href="motor_8h.html#a3603e97fc1a6348a090d0ce8aaef627d">STBY</a></div><div class="ttdeci">#define STBY</div><div class="ttdoc">A macro that defines standby-pin. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00099">motor.h:99</a></div></div>
<div class="ttc" id="motor_8h_html_a3ea32653b4399f65cd8a9fbd3856a15d"><div class="ttname"><a href="motor_8h.html#a3ea32653b4399f65cd8a9fbd3856a15d">PWMA</a></div><div class="ttdeci">#define PWMA</div><div class="ttdoc">A macro that defines the PWM-Pin A. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00033">motor.h:33</a></div></div>
<div class="ttc" id="motor_8h_html_a683b3c17fd73a02e14a04171f59c05b4"><div class="ttname"><a href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a></div><div class="ttdeci">#define MOTA1</div><div class="ttdoc">A macro that defines motor-pin A1. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00055">motor.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f66a0a38666bbadc0d418080954d2b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_set_position </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the position of the stepper (only in software). </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>The position. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00229">229</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                 {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a> = pos;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div>
<div class="ttc" id="motor_8c_html_afd03d8ac50bc4803e0c5a5fea33772de"><div class="ttname"><a href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a></div><div class="ttdeci">char motor_position</div><div class="ttdoc">The motor position. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00017">motor.c:17</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af4661f2fc8609e109c41713f5d2dbf71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_set_power </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>power</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the maximum power output. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">power</td><td>The power. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00211">211</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    assert(power &gt;= 0 &amp;&amp; power &lt;=100);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    OCR0A = (255/100) * power;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    OCR0B = (255/100) * power;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a82a3750545788111dcc7e2ec0209ca0b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_set_speed </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change time between steps. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>The char to process. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00194">194</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                            {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    assert(t&lt;=255);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="motor_8c.html#a35d858dcc7e4525252509d5491494490">speed</a> = t;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="ttc" id="motor_8c_html_a35d858dcc7e4525252509d5491494490"><div class="ttname"><a href="motor_8c.html#a35d858dcc7e4525252509d5491494490">speed</a></div><div class="ttdeci">char speed</div><div class="ttdoc">The time between steps. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00019">motor.c:19</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae28f5a8184eacfc5cad87d8beecc898b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_timer_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the timer0 for the power control. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015 </dd></dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00050">50</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                           {</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    TCCR0A |= (1&lt;&lt;COM0A1) | (1&lt;&lt;COM0B1) | (1&lt;&lt;WGM01) | (1&lt;&lt;WGM00);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    TCCR0B |= (1&lt;&lt;CS01);</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    OCR0A = (255/100) * <a class="code" href="motor_8h.html#a0d5e23bac60070676b465522a140f5c7">POWER</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    OCR0B = (255/100) * <a class="code" href="motor_8h.html#a0d5e23bac60070676b465522a140f5c7">POWER</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;}</div>
<div class="ttc" id="motor_8h_html_a0d5e23bac60070676b465522a140f5c7"><div class="ttname"><a href="motor_8h.html#a0d5e23bac60070676b465522a140f5c7">POWER</a></div><div class="ttdeci">#define POWER</div><div class="ttdoc">A macro that defines the maximum power output in %. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00154">motor.h:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f0425aa4058c28641dbbf70efcd15a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_toPosition </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turns motor to the defined position. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p</td><td>The char to process. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00167">167</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                             {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    p = p % <a class="code" href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a> &gt; p )</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <a class="code" href="motor_8c.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a>(<a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a>-p,<a class="code" href="motor_8h.html#a8a460b6555077a64fc97f2e7ef47b843">CCW</a>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a> &lt; p)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="motor_8c.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a>(p-<a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a>,<a class="code" href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="ttc" id="motor_8c_html_afd03d8ac50bc4803e0c5a5fea33772de"><div class="ttname"><a href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a></div><div class="ttdeci">char motor_position</div><div class="ttdoc">The motor position. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00017">motor.c:17</a></div></div>
<div class="ttc" id="motor_8h_html_a9f9730045a115a7a7583202ee12c1429"><div class="ttname"><a href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a></div><div class="ttdeci">#define MOTOR_MAX_STEPS</div><div class="ttdoc">A macro that defines motor maximum steps per rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00143">motor.h:143</a></div></div>
<div class="ttc" id="motor_8h_html_abe61b07c31c2a3e90576eb4c5d95b024"><div class="ttname"><a href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a></div><div class="ttdeci">#define CW</div><div class="ttdoc">A macro that defines clockwise rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00121">motor.h:121</a></div></div>
<div class="ttc" id="motor_8c_html_a4e4f36d6a7004d355f88c4fedca4eba0"><div class="ttname"><a href="motor_8c.html#a4e4f36d6a7004d355f88c4fedca4eba0">motor_turn</a></div><div class="ttdeci">void motor_turn(char steps, char dir)</div><div class="ttdoc">Turn Stepper for some steps in the desired direction. Based on the last step, this function sets the ...</div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00091">motor.c:91</a></div></div>
<div class="ttc" id="motor_8h_html_a8a460b6555077a64fc97f2e7ef47b843"><div class="ttname"><a href="motor_8h.html#a8a460b6555077a64fc97f2e7ef47b843">CCW</a></div><div class="ttdeci">#define CCW</div><div class="ttdoc">A macro that defines counter clockwise rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00132">motor.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4e4f36d6a7004d355f88c4fedca4eba0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void motor_turn </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>steps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn Stepper for some steps in the desired direction. Based on the last step, this function sets the pins to rotate the stepper by one step. </p>
<dl class="section author"><dt>Author</dt><dd>Alex </dd></dl>
<dl class="section date"><dt>Date</dt><dd>22.12.2015</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">steps</td><td>Number of steps. </td></tr>
    <tr><td class="paramname">dir</td><td>Direction (CW or CCW). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="motor_8c_source.html#l00091">91</a> of file <a class="el" href="motor_8c_source.html">motor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                                    {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">char</span> s = 0; s&lt;steps ; s++)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="motor_8c.html#a13ffd1849b44b0202b1ce9321911411e">step</a> = (<a class="code" href="motor_8c.html#a13ffd1849b44b0202b1ce9321911411e">step</a> + 1) % 4;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keywordflow">if</span> (dir == <a class="code" href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a>)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a> = (<a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a>+1) % <a class="code" href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="motor_8c.html#a13ffd1849b44b0202b1ce9321911411e">step</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                PORTD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                PORTB |= (1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                PORTD &amp;=  ~((1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>));</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                PORTD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                PORTD &amp;=  ~(1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                PORTB &amp;= ~(1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                PORTD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>)  | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                PORTD &amp;=  ~(1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                PORTB &amp;= ~(1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                PORTD |=  (1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                PORTB |= (1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                PORTD &amp;=  ~((1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>));</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            }</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        }</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a> = (<a class="code" href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a>-1) % <a class="code" href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a>;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="motor_8c.html#a13ffd1849b44b0202b1ce9321911411e">step</a>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                <span class="keywordflow">case</span> 0:</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                PORTD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                PORTB |= (1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                PORTD &amp;=  ~((1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>));</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                PORTD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                PORTD &amp;=  ~(1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                PORTB &amp;= ~(1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                PORTD |= (1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>)  | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                PORTD &amp;=  ~(1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                PORTB &amp;= ~(1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                PORTD |=  (1&lt;&lt;<a class="code" href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                PORTB |= (1&lt;&lt;<a class="code" href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                PORTD &amp;=  ~((1&lt;&lt;<a class="code" href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a>) | (1&lt;&lt;<a class="code" href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a>));</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="motor_8c.html#abb648242b26e3a1d611265e134b81198">_sleep_ms</a>(<a class="code" href="motor_8c.html#a35d858dcc7e4525252509d5491494490">speed</a>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="ttc" id="motor_8c_html_a35d858dcc7e4525252509d5491494490"><div class="ttname"><a href="motor_8c.html#a35d858dcc7e4525252509d5491494490">speed</a></div><div class="ttdeci">char speed</div><div class="ttdoc">The time between steps. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00019">motor.c:19</a></div></div>
<div class="ttc" id="motor_8h_html_a5a97b9410a899a92f489ff17c1d23e09"><div class="ttname"><a href="motor_8h.html#a5a97b9410a899a92f489ff17c1d23e09">MOTB1</a></div><div class="ttdeci">#define MOTB1</div><div class="ttdoc">A macro that defines motor-pin B1. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00077">motor.h:77</a></div></div>
<div class="ttc" id="motor_8c_html_afd03d8ac50bc4803e0c5a5fea33772de"><div class="ttname"><a href="motor_8c.html#afd03d8ac50bc4803e0c5a5fea33772de">motor_position</a></div><div class="ttdeci">char motor_position</div><div class="ttdoc">The motor position. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00017">motor.c:17</a></div></div>
<div class="ttc" id="motor_8h_html_aa90babf8b2cc9f24a09153374b925858"><div class="ttname"><a href="motor_8h.html#aa90babf8b2cc9f24a09153374b925858">MOTB2</a></div><div class="ttdeci">#define MOTB2</div><div class="ttdoc">A macro that defines motor-pin B2. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00088">motor.h:88</a></div></div>
<div class="ttc" id="motor_8h_html_a3c559cd9c5657f31feac95152bfb24f9"><div class="ttname"><a href="motor_8h.html#a3c559cd9c5657f31feac95152bfb24f9">MOTA2</a></div><div class="ttdeci">#define MOTA2</div><div class="ttdoc">A macro that defines motor-pin A2. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00066">motor.h:66</a></div></div>
<div class="ttc" id="motor_8c_html_a13ffd1849b44b0202b1ce9321911411e"><div class="ttname"><a href="motor_8c.html#a13ffd1849b44b0202b1ce9321911411e">step</a></div><div class="ttdeci">char step</div><div class="ttdoc">Last done step (0-3). </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00015">motor.c:15</a></div></div>
<div class="ttc" id="motor_8h_html_a9f9730045a115a7a7583202ee12c1429"><div class="ttname"><a href="motor_8h.html#a9f9730045a115a7a7583202ee12c1429">MOTOR_MAX_STEPS</a></div><div class="ttdeci">#define MOTOR_MAX_STEPS</div><div class="ttdoc">A macro that defines motor maximum steps per rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00143">motor.h:143</a></div></div>
<div class="ttc" id="motor_8h_html_abe61b07c31c2a3e90576eb4c5d95b024"><div class="ttname"><a href="motor_8h.html#abe61b07c31c2a3e90576eb4c5d95b024">CW</a></div><div class="ttdeci">#define CW</div><div class="ttdoc">A macro that defines clockwise rotation. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00121">motor.h:121</a></div></div>
<div class="ttc" id="motor_8h_html_a683b3c17fd73a02e14a04171f59c05b4"><div class="ttname"><a href="motor_8h.html#a683b3c17fd73a02e14a04171f59c05b4">MOTA1</a></div><div class="ttdeci">#define MOTA1</div><div class="ttdoc">A macro that defines motor-pin A1. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8h_source.html#l00055">motor.h:55</a></div></div>
<div class="ttc" id="motor_8c_html_abb648242b26e3a1d611265e134b81198"><div class="ttname"><a href="motor_8c.html#abb648242b26e3a1d611265e134b81198">_sleep_ms</a></div><div class="ttdeci">void _sleep_ms(int ms)</div><div class="ttdoc">Delay for ms milliseconds. The _delay_ms() function does not allow the use of variables. Thats what this function is used for. </div><div class="ttdef"><b>Definition:</b> <a href="motor_8c_source.html#l00032">motor.c:32</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
